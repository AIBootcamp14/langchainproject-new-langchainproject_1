services:
  - type: web
    name: financial-ai-agent
    env: python
    region: oregon
    buildCommand: |
      pip install --upgrade pip
      pip install -r requirements.txt
      PYTHONPATH=$PWD python -c "from src.rag.vector_store import VectorStore; vs = VectorStore(); vs.build_vector_store()"
    startCommand: PYTHONPATH=$PWD streamlit run src/streamlit_app.py --server.port=$PORT --server.address=0.0.0.0
    healthCheckPath: /_stcore/health
    envVars:
      - key: PYTHON_VERSION
        value: 3.12.0
      - key: UPSTAGE_API_KEY
        sync: false
      - key: TAVILY_API_KEY
        sync: false
    disk:
      name: chromadb-storage
      mountPath: /opt/render/project/data/chroma_store
      sizeGB: 1
